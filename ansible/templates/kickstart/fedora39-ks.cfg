# Generated by Anaconda 36.16.5
# Generated by pykickstart v3.36
#version=F36
# Reboot after installation
reboot
# Use text mode install
text

# Keyboard layouts
keyboard --vckeymap=no --xlayouts='no','us'
# System language
lang en_US.UTF-8

# Network information
{% if not use_dhcp %}
network  --bootproto=static --device="{{ device | default('link') }}" --gateway="{{ gateway }}" --ip="{{ ip }}" --netmask="{{ bridge_ip_cidr | ansible.utils.ipaddr('netmask') }}" --ipv6=auto --no-activate
{% else %}
network --bootproto dhcp --activate
{% endif %}
network  --hostname="{{ hostname }}"

# Use CDROM installation media
cdrom

%packages
@^server-product-environment
{% for package in packages | default([]) %}
{{ package }}
{% endfor %}
%end

# Do not configure the X Window System
skipx

# Generated using Blivet version 3.4.3
ignoredisk --only-use=vda
# System bootloader configuration
bootloader --location=mbr --boot-drive=vda
autopart
# Partition clearing information
clearpart --none --initlabel

timesource --ntp-disable
# System timezone
timezone Europe/Oslo --utc

user --name="{{ kickstart_username }}"
sshkey --username="{{ kickstart_username }}" "{{ kickstart_sshkey }}"

#rootpw --iscrypted $6$ELq1TBU0PBnaqpyG$1OK2rBDtfUs8HySNEm7nRGZAOk.ygFzEyORWb40PJRk9i40K5QhgM41OQlLxVYwl7syTw3fb71qQ5jBEuN8Ss/
rootpw test12345

%post --log=/root/ks-post.log

echo "{{ kickstart_username }} ALL=(ALL) NOPASSWD: ALL" > /etc/sudoers.d/{{ kickstart_username }}

dnf install -y cloud-init

%end
